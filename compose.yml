services:

  Telebot:
    build: ./bot
    image: telegrambot
    container_name: telebot
    restart: always
    command: "python main.py"
    env_file:
      - .env
    links:
      - "database:dbps"
    networks:
      - dbnet
    volumes:
      - ./bot:/app/Telebot
    ports:
      - "5000:5000"
    depends_on:
      - database


  database:
      image: mysql:8.0
      container_name: telebot_mysql
      restart: always
      environment:
        MYSQL_ROOT_PASSWORD: ${ROOT_PASSWORD}
        MYSQL_DATABASE: ${DB_NAME}
        MYSQL_USER: ${USER}
        MYSQL_PASSWORD: ${DB_PASSWORD}
      networks:
        - dbnet
      ports:
        - "3306:3306"
      volumes:
        - db_data:/var/lib/mysql



networks:
  dbnet:
    driver: bridge


volumes:
  db_data: